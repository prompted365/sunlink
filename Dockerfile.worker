# syntax=docker/dockerfile:1
FROM continuumio/miniconda3:4.12.0

WORKDIR /app

COPY environment.yml /app/environment.yml

RUN conda env create -f environment.yml && conda clean -afy

SHELL ["conda", "run", "-n", "sunlink", "/bin/bash", "-c"]

COPY . /app/

# Example: Start the Celery worker
CMD ["celery", "-A", "tasks.worker_tasks", "worker", "--loglevel=info"]